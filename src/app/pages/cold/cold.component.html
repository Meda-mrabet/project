<br>
<div>
  <div class=" pb-2  pt-3  mb-3 border-bottom">
    <div class="rounded shadow p-2 txt-center">

      <h1 class="h2" style="padding-left: 10px;">Gestion des offres des soins</h1>

      <button type="submit" style="margin-left: 80%; " mat-raised-button (click)="CreatePopUp()" mat-button
        color="primary"> Creer une Commande</button>

    </div>
  <br> <br>
  <h3  style="padding-left: 10px;">  Les consultations  d'aujourd'hui </h3>

<mat-form-field appearance="standard">
  <mat-label>Filter</mat-label>
  <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
</mat-form-field>
<br> <br> <br>
<div class="mat-elevation-z8" >
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8"  matSort (matSortChange)="announceSortChange($event)" style="width:100% ;" >

    <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->
  
    <!-- Position Column -->
    <ng-container matColumnDef="No">
      <th mat-header-cell *matHeaderCellDef mat-sort-header > No. </th>
      <td mat-cell *matCellDef="let element"> {{element.No}} </td>
    </ng-container>
  
    <!-- Name Column -->
    <ng-container matColumnDef="nom">
      <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by name"> Nom </th>
      <td mat-cell *matCellDef="let element"> {{element.nom}} </td>
    </ng-container>
  
    <!-- Weight Column -->
    <ng-container matColumnDef="prenom">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Prenom </th>
      <td mat-cell *matCellDef="let element"> {{element.prenom}} </td>
    </ng-container>
  
    <!-- Symbol Column -->
    <ng-container matColumnDef="tel">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Tel </th>
      <td mat-cell *matCellDef="let element"> {{element.tel}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="problem">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Probleme </th>
      <td mat-cell *matCellDef="let element"> {{element.problem}} </td>
    </ng-container>
     <!-- Symbol Column -->
     <ng-container matColumnDef="address">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Address </th>
      <td mat-cell *matCellDef="let element"> {{element.address}} </td>
    </ng-container>
   <!-- Symbol Column -->
   <ng-container matColumnDef="paiement">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Paiement </th>
    <td mat-cell *matCellDef="let element"> 
  
      {{element.paiement}}  
  </td>
  </ng-container>
  <ng-container matColumnDef="etat">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Etat </th>
  
    <td mat-cell *matCellDef="let element;index as i"> 
  
  
      <a type="button" (click)="onUpdate(traitements[i].id_trait , traitements[i].id_cmd)"
      class="badge {{element.badge}} rounded-pill" style="text-decoration: none;"> {{element.etat}}
    </a>
  </td>
  </ng-container>
  <ng-container matColumnDef="tempsRest"  >
    <th mat-header-cell *matHeaderCellDef mat-sort-header>  Temps reste </th>
    <td mat-cell *matCellDef="let element; index as i" > 
  <span *ngIf="  traitements[i]?.rdv.time > dateSeconds  " >  {{element.tempsRest}} </span>
  <span *ngIf="  traitements[i]?.rdv.time < (dateSeconds  ) && traitements[i]?.rdv.time >= (dateSeconds -0.0277 )" >Aujourd'hui</span>
  <span *ngIf="  traitements[i]?.rdv.time < (dateSeconds  ) && traitements[i]?.rdv.time < (dateSeconds -0.0277 )" >Déjà passe </span>
  </td></ng-container>
  <ng-container matColumnDef="details">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Details </th>
    <td mat-cell *matCellDef="let element;index as i"> 
  
      <i class="fa fa-info ms-2 cursor-pointer" id="icon" (click)="detail(commandes[i],traitements[i])"
      style="color: rgb(0, 0, 255); "></i>
  </td>
  </ng-container>
  <ng-container matColumnDef="raiting">
    <th mat-header-cell *matHeaderCellDef mat-sort-header> Raiting </th>
    <td mat-cell *matCellDef="let element;index as i"> 
      <a type="button" (click)="feedBack(traitements[i].id_trait,traitements[i].id_praticien)" >   <img src="../../../assets/images/favourite.png" alt="rating" style="width:21px ; height:20px; 
        ;"> </a>  
  </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" colspan="4">Aucune donnée correspondant au filtre "{{input.value}}"</td>
    </tr>
  </table>
  <mat-paginator [pageSizeOptions]="[6, 12, 18]"
  showFirstLastButtons 
  aria-label="Select page of periodic elements">
  </mat-paginator>

</div>
<br> <br> <br> <br>
  
<br>
<br>


<br>